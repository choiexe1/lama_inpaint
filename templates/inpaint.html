{% extends "base.html" %}

{% block content %}
<h1>Inpaint</h1>
<p class="page-desc">Remove unwanted objects from images using AI-powered inpainting. Simply brush over the area you want to remove, and AI will intelligently fill it in.</p>
<div class="upload-area" id="inpaintUpload">
    <input type="file" accept="image/*" id="inpaintFileInput">
    <p>Click to upload image</p>
</div>
<div id="inpaintEditor" style="display:none;">
    <div class="brush-controls">
        <label>Brush Size</label>
        <input type="range" id="brushSize" min="5" max="100" value="30">
        <input type="number" id="brushSizeNum" min="5" max="100" value="30">
        <span class="divider"></span>
        <label>Mask Color</label>
        <input type="color" id="maskColor" value="#ff3c3c">
    </div>
    <div class="panels">
        <div class="panel">
            <div class="panel-label">Mask</div>
            <div class="canvas-container" id="maskContainer">
                <canvas id="maskCanvas"></canvas>
                <div id="brushPreview"></div>
            </div>
            <div class="panel-buttons">
                <button class="btn btn-secondary" id="clearMask">Mask Clear</button>
                <button class="btn btn-secondary" id="undoMask">Undo</button>
                <button class="btn btn-secondary" id="redoMask">Redo</button>
                <button class="btn btn-primary" id="runInpaint">Run Inpaint</button>
            </div>
        </div>
        <div class="panel">
            <div class="panel-label">Result</div>
            <div class="canvas-container" id="resultContainer">
                <canvas id="resultCanvas"></canvas>
                <div class="result-placeholder" id="resultPlaceholder">
                    Draw mask and click Run Inpaint
                </div>
            </div>
            <div class="panel-buttons">
                <button class="btn btn-primary" id="downloadResult" style="display:none;">Download</button>
                <button class="btn btn-secondary" id="resetInpaint">Reset</button>
            </div>
        </div>
    </div>
    <div id="errorDisplay" class="error-display"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/inpaint.js"></script>
{% endblock %}
